<template name="posts">
    <div class="addGameBlock">
        <h2>Voeg een wedstrijd toe</h2>
        {{#if currentUser}}
        {{#autoForm collection="Posts" id="insertPostForm" type="insert"}}
            <fieldset>
                {{> afQuickField name='place'}}
                {{> afQuickField name='against'}}
                {{> afQuickField name='datetime'}}
            </fieldset>
            
            <button type="submit" class="btn btn-primary">+</button>
            
        {{/autoForm}}
        {{else}}
                <p>Log in om een wedstrijd toe te voegen</p>
            {{/if}}
    </div>
    <div class="games">
        <h3>Geplande wedstrijden:</h3>
        <ul>
            {{#each posts}} 
                <li>
                    <div class="placeBLock">
                        <h4>{{datetime}}</h4>
                        {{#if currentUser}}
                        <div><a href="{{pathFor 'post.show'}}"> Bewerk</a> | <a href="#" class="delete">Verwijder</a></div>
                        {{/if}}
                    </div>
                    <p>{{place}} Tegen {{against}}</p>
                    {{#if currentUser}}
                        <button id="join" class="btn btn-primary">Ik doe mee!</button>
                        <button id="joinNot" class="btn btn-primary invisible">Ik doe toch niet mee</button>
                        
                    {{else}}
                        <p>Log in om deel te nemen</p>
                    {{/if}}
                    <div class="participants">
                        <p>Deelnemers: {{> list data = attendees}} </p>
                    </div>
                    
                </li>
                <hr/>
            {{/each}}
        </ul>
    </div>
    
</template>

<template name="list">
    <ul>
        {{#each person in data}}
            <!-- <li>{{person}}</li> -->
            <li>{{username person}}</li>
            
        {{/each}}
    </ul>
</template>



